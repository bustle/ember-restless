<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/main/state.js - ember-restless</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.7.0/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify.css">
    <link rel="stylesheet" href="../assets/css/yuidoc.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="../assets/css/yuidoc-bootstrap.css">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-skin-sam">
<div class="navbar navbar-static-top">
    <div class="navbar-inner">
        <div class="container">
            <h1 class="brand">
                
                ember-restless
            </h1>
        	<ul class="nav">
                <li class="divider-vertical"></li>
                <li>
                    <p class="navbar-text">
                        API Docs for Version: <b>0.4.1</b>
                    </p>
                </li>
            </ul>
            <form class="navbar-form pull-right" style="line-height: 40px; height: 40px;">
                <input style="margin-top: 0;" type="text" class="search-query" placeholder="Search for classes/modules..." data-obj='["classes/RESTless", "classes/RESTless.Adapter", "classes/RESTless.Client", "classes/RESTless.FixtureAdapter", "classes/RESTless.JSONSerializer", "classes/RESTless.Model", "classes/RESTless.ReadOnlyModel", "classes/RESTless.RecordArray", "classes/RESTless.RESTAdapter", "classes/RESTless.Serializer", "classes/RESTless.State", "modules/ember-restless"]'>
            </form>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="span3">
	    <div>
    <h3>APIs</h3>
    <div id="sidebar" data-spy="affix" data-offset-top="80">
        <ul id="main-nav" class="nav nav-tabs" style="margin-bottom:0;">
            <li class="active"><a href="#classes" data-toggle="tab">Classes</a></li>
            <li><a href="#modules" data-toggle="tab">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" placeholder="Type to filter APIs">
        </div>

        <div class="tab-content" style="border: 1px solid #DDD; border-top:0;">
            <div class="tab-pane active" id="classes">
                <ul id="api-classes" class="nav nav-list">
                    
                        <li><a href="../classes/RESTless.html">RESTless</a></li>
                    
                        <li><a href="../classes/RESTless.Adapter.html">RESTless.Adapter</a></li>
                    
                        <li><a href="../classes/RESTless.Client.html">RESTless.Client</a></li>
                    
                        <li><a href="../classes/RESTless.FixtureAdapter.html">RESTless.FixtureAdapter</a></li>
                    
                        <li><a href="../classes/RESTless.JSONSerializer.html">RESTless.JSONSerializer</a></li>
                    
                        <li><a href="../classes/RESTless.Model.html">RESTless.Model</a></li>
                    
                        <li><a href="../classes/RESTless.ReadOnlyModel.html">RESTless.ReadOnlyModel</a></li>
                    
                        <li><a href="../classes/RESTless.RecordArray.html">RESTless.RecordArray</a></li>
                    
                        <li><a href="../classes/RESTless.RESTAdapter.html">RESTless.RESTAdapter</a></li>
                    
                        <li><a href="../classes/RESTless.Serializer.html">RESTless.Serializer</a></li>
                    
                        <li><a href="../classes/RESTless.State.html">RESTless.State</a></li>
                    
                </ul>
            </div>

            <div class="tab-pane" id="modules">
                <ul id="api-modules" class="nav nav-list">
                    
                        <li><a href="../modules/ember-restless.html">ember-restless</a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</div>

        </div>
        <div class="span9">
                <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <div class="page-header">
    <h1>src/main/state.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
/**
  The State Mixin is responsible for keeping state and
  handling state events for Models.

  @class State
  @namespace RESTless
  @uses &lt;a href=&quot;http://emberjs.com/api/classes/Ember.Evented.html&quot;&gt;Ember.Evented&lt;/a&gt;
*/
RESTless.State = Ember.Mixin.create( Ember.Evented, {
  /**
    Model has not yet been saved; not yet assigned a primary key.
    @property isNew
    @type {Boolean}
  */
  isNew: true,
  /**
    Model has been retrieved and properties set.
    @property isLoaded
    @type {Boolean}
  */
  isLoaded: false,
  /**
    Model has changes that have not yet been saved.
    @property isDirty
    @type {Boolean}
  */
  isDirty: false,
  /**
    Model model is in the process of saving.
    @property isSaving
    @type {Boolean}
  */
  isSaving: false,
  /**
    Model model is in error state.
    @property isError
    @type {Boolean}
  */
  isError: false,

  /**
    Hash of current errors on model.
    @property errors
    @type Object
  */
  errors: null,

  /**
    Fired when the record is created.
    @event didCreate
  */
  didCreate: Ember.K,
  /**
    Fired when the record is updated.
    @event didUpdate
  */
  didUpdate: Ember.K,
  /**
    Fired when the record is enters the loaded state.
    @event didLoad
  */
  didLoad: Ember.K,
  /**
    Fired when the record is deleted.
    @event didDelete
  */
  didDelete: Ember.K,
  /**
    Fired when the record enters the error state.
    @event becameError
  */
  becameError: Ember.K,

  /**
    Updates state and triggers events upon saving.
    @method onSaved
    @param {Boolean} wasNew was a new model prior to saving.
   */
  onSaved: function(wasNew) {
    this.setProperties({
      isDirty: false,
      isSaving: false,
      isLoaded: true,
      isError: false,
      errors: null
    });
    this._triggerEvent(wasNew ? &#x27;didCreate&#x27; : &#x27;didUpdate&#x27;, this);
    this._triggerEvent(&#x27;didLoad&#x27;, this);
  },

  /**
    Updates state and triggers events upon deletion.
    @method onDeleted
   */
  onDeleted: function() {
    this._triggerEvent(&#x27;didDelete&#x27;, this);
    Ember.run.next(this, function() {
      this.destroy();
    });
  },

  /**
    Updates state and triggers events upon loading.
    @method onLoaded
   */
  onLoaded: function() {
    this.setProperties({
      isDirty: false,
      isSaving: false,
      isLoaded: true,
      isError: false,
      errors: null
    });
    this._triggerEvent(&#x27;didLoad&#x27;, this);
  },

  /**
    Updates state and triggers events upon an error.
    @method onError
   */
  onError: function(errors) {
    this.setProperties({
      isSaving: false,
      isError: true,
      errors: errors
    });
    this._triggerEvent(&#x27;becameError&#x27;, errors);
  },

  /**
    Clears errors and resets error state
    @method clearErrors
    @returns {Object}
   */
  clearErrors: function() {
    this.setProperties({ isError: false, errors: null });
    return this;
  },

  /**
    Copies the current state to a cloned object
    @method copyState
    @param {Object} clone the cloned object
    @returns {Object} the cloned object with copied state
   */
  copyState: function(clone) {
    var mi = RESTless.State.mixins,
        props = mi[mi.length-1].properties;
    Ember.beginPropertyChanges(clone);
    for(var p in props) { 
      if(props.hasOwnProperty(p) &amp;&amp; typeof props[p] !== &#x27;function&#x27;) {
        clone.set(p, this.get(p));
      }
    }
    Ember.endPropertyChanges(clone);
    return clone;
  },

  /**
    Flag for deferring dirty state when setting initial values on create() or load()
    @property _isReady
    @type {Boolean}
    @private
  */
  _isReady: false,

  /**
    Helper function to trigger events on models and to any listeners.
    @method _triggerEvent
    @private
  */
  _triggerEvent: function(event, data) {
    Ember.run(this, function() {
      Ember.tryInvoke(this, event, [data]);
      this.trigger(event, data);
    });
  }
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/jquery/jquery-1.10.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify.min.js"></script>
<script src="../assets/js/yuidoc-bootstrap.js"></script>
<script>prettyPrint();</script>
</body>
</html>
